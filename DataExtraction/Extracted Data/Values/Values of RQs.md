# Values of Research Questions on BC-IoT Systems

## Why do IoT systems integrate blockchains?

There are two perspectives to the reason of BC integration in IoT systems. The first perspective is about the goals or the improvement objectives that IoT systems aim to fulfill by adding BC-based mechanisms into their existing procedures. The second perspective is about the technical problems that IoT systems seek to resolve by leveraging BC-based mechanisms. These two perspectives are not orthogonal but complementary in forming a comprehensive picture of BC-IoT integration. 

### Improvement Objectives

Objectives of the BC integration can be organized into two groups. The one is about improving the quality of IoT systems by replacing some existing routines with BC-based mechanisms. The second one is about enabling IoT systems to do new things with BC-based mechanisms. 

Improve quality of IoT system or systems:

- Security in terms of integrity: ISO/IEC 25010 defines integrity of the ability of a system to prevent unauthorised access and modification of data and computer program. Works that use BC as immutable storage of some records or procedures fall into this category.
- Security in terms of authenticity: ISO/IEC 25010 defines authenticity as the degree that the identity of a subject or resource can be proved to be the one claimed. Works that use BC as authentication mechanisms fall into this category. 
- Security in terms of accountability: ISO/IEC 25010 defines accountability as the degree which actions or an entity can be traced uniquely to it. 
- Security in terms of confidentiality: ISO/IEC 25010 defines confidentiality as the degree that a system ensures that the data are accessible only to those authorized to have access. 
- Security in terms of non-repudiation: ISO/IEC 25010 defines non-repudiation as the degree that an actor cannot deny that an event or action has taken place. 
- Reliability in terms of availability: ISO/IEC 25010 defines availability as the degree to which the system is operational and accessible when required for use.
- Performance in terms of time behaviour of the system: ISO/IEC 25010 defines the degree to which the response processing time and throughput of the system when performing its functions meet the requirements.
- Compability in terms of interoperability: ISO/IEC 25010 defines interoperability as the degree to which two or more systems, products, or components can exchange information and use the information that has been exchanged. Works that uses BC to bridge IoT systems or devices from different organizations with different formats tend to fall into this category. 

Add functionality to IoT systems (new version):

- Support the ownership and exchange of resources monitored by IoT systems: The most common form of resources is renewable energy.
- Support the ownership and exchange of resources consumed by IoT systems: CPU time, storage space, software patches.
- Support the ownership and exchange of resources generated by IoT systems: Sensor data and actuation services. 
- Creating provenance chain of IoT devices, data, or IoT-managed entities: Supply-chain provenance, IoT hardware provenance, IoT data provenance.
- Enable IoT service discovery
- Orchestrate processes involving IoT devices
- Synchronize and form consensus among IoT devices
- Maintain and conduct reputation assessment of devices and services in IoT systems. 

### Technical Problems

This is existing version

- Build Trusted Communication Channels
  - Device-to-Backend Communication (=> Intra-system channel)
  - Inter-Silo Communication (=> Inter-system channel)
  - ~~Create Cross-platform Decentralized Identity an Access Management System~~
- Control and Incentivize the Distribution of IoT Data and Services
  - ~~Control the Placement of IoT data and services~~ (=> Decentralize processes within an IoT system)
  - Decentralize the distribution of software and firmware updates (=> Decentralize firmware delivery)
  - Incentivise data and firmware sharing (=> Control and incentivize firmware distribution)
- Decentralize the operation of IoT systems
  - ~~Control and record processes involving IoT devices~~ (=> Operate processes between IoT systems without intermediaries OR Decentralize the control of processes within an IoT system)
  - ~~Remove the Trusted Third Party~~ (=> Operate processes between IoT systems without intermediaries OR Decentralize the control of processes within an IoT system)
- Decentralize the security of IoT systems
  - Decentralized authentication of IoT devices (=> Decentralize the authentication of devices)
  - Decentralized authorization to and from IoT systems (=> Decentralize the access control to and from devices)
  - Decentralised authorizatio to IoT data (=> Decentralize the access control to data and services)
  - Decentralized trust assessment of IoT devices and services (=> Decentralize the management of trust and reputation)
- Ensure integrity of IoT systems and their data
  - Prevent tampering and provide provenance to at-rest IoT data (=> Protect at-rest sensor data and event records)
  - Prevent tampering of in-motion IoT data (=> Protect in-transit sensor data)
  - Prevent tampering of IoT devices



Technical problems of IoT systems that drive BC-integration can be organised into five groups.

**Build trusted communication channels:** This group of problems concerns with establishing tamper-proof, accountable, and irreversible communication channels within or between IoT systems. 

- Build intra-system communication channels
- Build inter-system communication channels

**Decentralize security operations of IoT systems**: This group of problems concerns with carrying out security-related operations of IoT systems, such as authentication, authorisation, and trust assessment, without relying on a server or service provider. 

- Decentralize the access control to and from devices
- Decentralize the access control to data and services
- Decentralize the management of identity and certificates
- Decentralize the authentication of devices
- Decentralize the management of trust and reputation
- Decentralize firmware delivery

**Control and incentivize exchanges in IoT systems:** This group of problems concerns with providing incentives and controlling the business logic of exchanges between participants of an IoT ecosystem.

- Control and incentivize M2M trading
- Control and incentivize firmware distribution

**Decentralize operations of IoT systems:** This group of problem concerns with carrying out process within and between IoT systems without relying on centralised intermediaries (i.e., trusted third party).

- Operate processes between IoT systems without intermediaries
- Decentralize the control of processes within an IoT system

**Ensure the integrity of data and services in IoT systems:** This group of problem concerns with ensuring the integrity of sensor data and other records in IoT systems.

- Protect at-rest sensor data and event records
- Protect in-transit sensor data
- Protect administrative and security records, such as access policy, device registry, and trust records
- Protect indexes
- Protect records of resource exchanges
- Protect configuration records of IoT devices
- Protect software instructions



## How do IoT Systems integrate BC?



### How do BC fit into IoT systems?

Migration from the existing version:

- Business process orchestrator => Keep as is
- Device and Data Integrity Validator => Break into Device Integrity Verifier or Data Integrity Verifier
- Digital Twins of IoT Devices => Keep as is
- Trust Management System => Keep as is
- Communication Channel => Break into Intra-System Communication Channel and Inter-System Communication Channel. 
- Device, Data, and Service Authorization => Access Control Manager
- Device Authentication => Authentication Manager
- Service Registry and Match Matchmaker => Break into Service Registry and Service Matchmaker
- Public Key infrastructure => Keep as is
- Sensor Data Storage or Registry => Break into Data Store and Data Index
- Interaction and Incident Records => Replace with Business Process Orchestrator or Data Store
- Firmware Delivery => Replace with Update Delivery Infrastructure
- Identity Management System => Replace with either Public Key Infrastructure or Authentication Manager
- Event Detector => Keep as is
- Publish-Subscribe Middleware => Replace with inter- or intra-system communication channel
- Time Source => Keep as is

**Affected modules of IoT systems**

- **Business Process Orchestrator:** This component is responsible for coordinating and recording activities of IoT devices, services, and human users to carry out business interactions, such as exchanging renewable energy, renting data, and delivering software updates. 
- **Workflow Orchestrator**: This component coordinates and records activities of devices and services within or across IoT systems to carry out predefined processes. These processes do not involve incentives and exchanges. 
- **Device Integrity Verifier**: This component verifies the integrity of IoT devices, particularly their configurations, as they move across supply chains and operate in the field.
- ~~**Data Integrity Verifier**: This component verifies and guarantees the integrity of data collected by IoT systems via networked sensors.~~
- **Digital Twin of IoT Devices**: This component creates the digital representation of IoT devices, simplifying the interaction with them from software programs and services. 
- **Trust Management System**: This component handles the calculation and storage of trust or reputation scores of devices, users, and services of IoT systems. 
- **Intra- System Communication Channel**: This component allows devices and other components to exchange data and instructions within an IoT system. 
- **Inter- System Communication Channel**: This component allows devices and other components to exchange data and instructions across IoT systems. 
- **Access Control Manager**: This component monitors and grants access to devices, data, and services of IoT systems based on policies specified by the owners. 
- **Authentication Manager:** This component maintains identifying features of participants in an IoT systems and verifies their identity claims.
- **Service Registry**: This component maintains the details of services that an IoT system knows or offers. 
- **Service Matchmaker**: This component matches requests with services known or offered by an IoT system. 
- **Public Key Infratructure**: This component handles the binding of public keys with identities of entities via the issuance of certificates. 
- **Secure Data Store:** This component stores and facilitates the retrieval of data generated within IoT systems, such as sensing data and real-world events. 
-  **Secure Index Store:** This component maintains indexes pointing to data entries generated by IoT systems that are stored elsewhere. 
- **Update Delivery Infrastructure**: This component distributes software and firmware updates from device manufacturers to deployed IoT devices. 
- **Event Detector**: This component detects events, such as violations of service level agreements, from the raw data recorded by IoT systems. 
- **Time Source**: This component provides accurate time stamps for synchronizing devices and software programs of IoT systems. 



**Deployment Position of BC within IoT system**

- **Cloud:** The nodes of the blockchain network are deployed outside the operation area of IoT devices and their immediate processing nodes. This deployment mode covers the use of Infrastructure-as-a-Service, Blockchain-as-a-Service, as well as the use of existing public blockchain infrastructures. 
- **Fog:** The nodes of the blockchain network are deployed on computing nodes that locate in the operation area of IoT devices, but at least one network hop away from the devices at the edge. 
- **Edge:** The nodes of the blockchain network are deployed directly on the IoT devices at the edge of the network, which handle sensing and actuation. 
- **Cloud-Full -- Edge-LW:** The deployed blockchain network utilizes both full and lightweight nodes. The full nodes are deployed on the cloud and might belong to a public blockchain network. The lightweight nodes are deployed on devices at the edge. 
- **Cloud-Full -- Fog-LW:** The deployed blockchain network utilizes both full and lightweight nodes. The full nodes are deployed on the cloud and might belong to a public blockchain network. The lightweight nodes are deployed on fog nodes.
- **Fog-Full -- Edge-LW:**  The deployed blockchain network utilizes both full and lightweight nodes. The full nodes are deployed on fog nodes. The lightweight nodes are deployed on devices at the edge.
- **Cloud & Fog:** This mode of deployment consists of at least two blockchain networks. One follows the cloud-based deployment, the others are fog-based.
- **Cloud & Edge:** This mode of deployment consists of at least two blockchain networks. One follows the cloud-based deployment, the others are edge-based.
- **Fog & Edge:** This mode of deployment consists of at least two blockchain networks. One follows the fog-based deployment, the others are edge-based.

### How do IoT systems offload to BC?

Existing on-chain data:

- Authentication records => Keep as is. 
- Authorization policies => Access Control Policies
- Authorization requests and responses => Authorization records
- Trust ratings => Reputation and Trust Ratings
- Commands to Devices => Instructions for Devices
- Sensor Reading Hashes => Sensor Data Hashes
- Current Time => Keep as is. 
- Data Placement Record => Data Indexes
- Resource Exchange Record => Keep as is. 
- Device Description and Identity => Keep as is. 
- Device Interaction Record => Keep as is.
- Service Interaction Record => Keep as is. 
- Sensor Readings => Sensor Data
- Firmware Hash (and Binary) => <u>Binary of Updates OR Hash of Updates</u>
- Processing Placement Records => Keep as is
- SDN Flow Tables => Keep as is. 
- Service Descriptions => Keep as is. 
- Whitelisted / Blacklisted IP addresses => Access Control Policies
- Security Incident Reports => Security Incident Records

**On-chain Data:**

- **Access Control Policies:** Policies governing the access to devices, data, and services of IoT systems, such role-based policies, attribute-based policies, and lists of allowed and forbidden IP addresses. 
- **Authorization Records**: Records of requests for access and responses by the access control management component. 
- **Authentication Records**: Records of requests for authentication and responses by the authentication management component. 
- **Reputation and Trust Ratings**: Records of reputation or trust scores of devices and services participating in IoT systems. 
- **Instructions for Devices**: Commands for IoT devices, such as flight plans and service invocations. 
- **Sensor Data**: Data and events collected by IoT devices. 
- **Sensor Data Hashes**: Digests of data collected by IoT devices, which can be used as proof-of-existence or pointers to off-chain data packets. 
- **Current Time**: Time stamps provided by a trusted time source. 
- **Data Indexes:** Pointers to off-chain data packets. 
- **Resource Exchange Records:** Records of business interactions and exchanges between machines and users of IoT systems. 
- **Device Description and Identity**: Records of identities, identifying features, and other descriptions of IoT devices, such as origin, configurations, hashes of their software agents, and whitelisted software. 
- **Device Interaction Records**: Records of interactions with devices in IoT systems.
- **Service Interaction Records**: Records of IoT systems invoking external services or of external parties invoking services offered by the systems. 
- **Binary of Updates:** Binaries of software updates for IoT devices issued by their manufacturers.
- **Hashes of Updates:** Digests of software updates for proof-of-existence and integrity guarantee purpose.
- **Processing Placement Records**: Records of the offloading of computational tasks from devices to fog nodes or cloud services. 
- **SDN Flow Tables:** Flow tables for OpenFlow Switches in a software defined network. 
- **Service Description**: Metadata and descriptions of services offered or consumed by IoT systems. 
- **Security Incident Records**: Records of security incidents in an IoT system, such as failed authentications and unauthorized accesses. 



Existing on-chain logic:

- Authorization Mechanism => Access control
- Contract between resource providers and consumers => Resource exchange contracts
- Data index maintainence => Keep as is. 
- Business process => <u>Resource exchange contracts OR Workflow Orchestration</u>
- Command integrity check => Integrity Checking
- Device integrity check => Integrity Checking
- Multi-party computation protocol => Workflow Orchestration
- Service matchmaking mechanism => Service Matching
- Digital-twins => Keep as it. 
- Event Detection mechanism => Event Detection
- Firewall update mechanism => Access control
- Fund distribution mechanism => Resource exchange contracts
- Matchmaking mechanism => Service Matching
- Publish-subscribe protocol => Keep as is. 
- Reputation score calculation => Keep as is. 

**On-chain logic:**

- **Access control:** Assess incoming requests against existing policies, grant and manage access tokens, and update access policies. 
- **Identity Management**: Update and manage the identity information of devices and services of IoT systems. 
- **Authentication**: Assess the incoming identity claims against the existing identifying records.  
- **Resource exchange contracts:** Specify and enforce terms, conditions, and agreements between users and machines of IoT systems that engage in resource exchanges, such as buying renewable energy, renting devices, compensating for software updates distribution, and distributing funds to machine's account. These contracts govern the change of ownership of assets recorded in the blockchain. 
- **Data Index Maintenance:** update and maintain indexes of data packets stored off-chain. 
- **Workflow Orchestration:** control the activities of devices and services within or across IoT systems to carry out predefined workflow, such as a multi-party computation protocol or DDoS detection schemes. 
- **Service Matching**: Matching requests with the existing services offered or consumed by IoT systems. 
- **Integrity Checking**: Verify the integrity of the input data, such as device instructions and configurations, against the existing records on-chain. 
- **Digital-twins:** Maintain digital representatives of IoT devices, govern and update the state of devices based on incoming transactions. 
- **Event Detection**: Detect events, such as violations of service level agreements, based on the incoming sensing data. 
- **Publish-Subscribe Protocol:** Maintain a list of topics that users can subscribe to, and add messages to those topics based on incoming transactions. 
- **Reputation Score Calculation**: Calculate and update the reputation of trust ratings of devices and services of IoT systems based on their behaviours and assessment of their peers. 
- **QoS Calculation**: Calculate quality metrics of industrial services based on the data reported by IoT sensors and submitted to the blockchain. 

### What are the configurations of the integrated BC?



## What optimizations were performed on blockchains to work with IoT systems?



## Archetypes of BC-IoT Systems from utility point of view

**Use BC to facilitate the IoT M2M economy:** In this archetype, BC is used to operate the business logic that govern the exchange of resources between machines. This process might be influenced by humans, but it can also run autonomously by machines. BC is leveraged for its guarantees on transparency, non-repudiation, and the integrity of data and process.

- **Improvement objective:** 
  - Support the ownership and exchange of resources monitored by, consumed by, or generated by IoT systems, 
  - Improve accountability and non-repudiation.
- **Technical problem:** 
  - Control and incentivize M2M trading
  - Protect records of resource exchanges



**Use BC to decentralize and incentivize the distribution of firmware updates for IoT devices:** In this archetype, BC is used to maintain integrity of security patches for IoT devices and provide incentives to encourage the distribution of these patches in a peer-to-peer fashion. BC is leveraged for its integrity guarantee, non-repudiation, cryptocurrency, and smart contracts. 

- **Improvement objective:** 
  - Support the ownership and exchange of resouces consumed by IoT systems (i.e., patches), 
  - Improve accountability and non-repudiation.
- **Technical problem:**
  - Control and incentivize firmware distribution
  - Protect records of resource exchanges
  - Decentralize firmware delivery



**Use BC to establish shared data among IoT systems for traceability:** In this archetype, BC is used to improve interoperability between IoT systems to enable tracking of physical entities that moves across them. BC is leverated for its decentralisation and integrity guarantee. Both of these qualities allow IoT systems to cooperate without trusting each other or a third party. 

- **Improvement objective:** 
  - Improve compatibility in terms of interoperability, 
  - Improve security in terms of accountability and non-repudiation, 
  - Create provenance chain of IoT devices, data, or IoT-managed entities. 
- **Technical problem:**
  - Build intra-system communication channels
  - Protect at-rest sensor data and event records



**Use BC to build decentralized authorization mechanisms:** In this archetype, BC is used to build distributed authorization and access control mechanisms, which can be used within an IoT system or shared by many. Access control policies can apply either to the request coming to as well as leaving from IoT devices. Collaborative whitelisting and blacklisting solutions also belong to this archetype. BC is leveraged for its decentralized operation and the ability to tamper-proof both the access policy and the access control process. 

- **Improvement objective:** 
  - Improve integrity and confidentiality of the system. 
- **Technical problem:**
  - Decentralize the access control to and from devices OR Decentralize the access control to data and services
  - Protect administrative and security records, such as access policy, device registry, and trust records



**Use BC to build decentralized authentication mechanisms:** In this archetype, BC is used to build distributed authentication mechanisms for devices, services, or users. BC is leveraged for its decentralized operation, and the ability to tamper-proof both identifying information and authentication process. 

- **Improvement objective:** 
  - Improve authenticity of the system. 
- **Technical problem:**
  - Protect administrative and security records, such as access policy, device registry, and trust records
  - Decentralize the authentication of devices



**Use BC to build decentralized trust management mechanisms:** In this archetype, BC is used to store trust or reputation scores of parties in IoT systems. It might also take part in the calculation of these scores. BC is leverated for its decentralized operation and its integrity guarantees. 

- **Improvement objective:** 
  - Improve integrity and 
  - Maintain and conduct reputation assessment of devices and services in IoT systems. 
- **Technical problem:**
  - Protect administrative and security records, such as access policy, device registry, and trust records
  - Decentralize the management of trust and reputation



**Use BC to build trusted communication channel for coordination within an IoT system**: In this archetype, BC is leverated as immutable shared storage, through which devices within an IoT system communicate. 

- **Improvement objective:** 
  - Improve security in terms of integrity, non-repudiation, and accountability. 
- **Technical Problem:**
  - Build intra-system communication channels
  - Decentralize the control of processes within an IoT system



**Use BC to build trusted communication for coordination between IoT systems:** In this archetype, BC is leverated as an immutable shared storage that link devices in different trust domains. For instance, it can be used to coordinate distributed software agents in detecting DDoS attacks from IoT botnets. 

- **Improvement objective:** 
  - Improve security in terms of integrity, non-repudiation, and accountability. 
- **Technical problem:**
  - Build inter-system communication channels
  - Operate processes between IoT systems without intermediaries



**Use BC as a secure storage or sensor data:** In this archetype, BC is leveraged as a tamper-proof database for data entries or pointers to off-chain data entries. 

- **Improvement objective:**
  - Improve security in terms of integrity
- **Technical problem:**
  - Protect at-rest sensor data and event records OR Protect indexes



**Use BC as a platform for trusted computing**: In this archetype, the ability to execute smart contracts of BC is leveraged to build a trusted computing platform upon untrusted computing nodes. 

- **Improvement objective:**
  - Improve security in terms of integrity
- **Technical problem:**
  - Protect software instructions